<!DOCTYPE html>
<html lang="en" data-accent-color="blue" data-content_root="./">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Usage Guide - Panobbgo 0.0.1pre documentation</title><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Extending Panobbgo" href="guide_extending.html" /><link rel="prev" title="Architecture Overview" href="guide_architecture.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="_static/pygments.css?v=43bd62f4" />
    <link rel="stylesheet" type="text/css" href="_static/shibuya.css?v=44020203" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link media="print" rel="stylesheet" type="text/css" href="_static/print.css?v=20ff2c19" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Usage Guide"/>
    <meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="index.html">
      
      
      <strong>Panobbgo</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link">
          <a href="https://github.com/haraldschilly/panobbgo">
            <span>GitHub</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials">
  <a href="https://github.com/haraldschilly/panobbgo" aria-label="GitHub">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2"></span>
          <span class="hamburger_3"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="guide.html">Panobbgo User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide_setup.html">Setup and Quick Start Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_introduction.html">Introduction to Panobbgo</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_mathematical_foundation.html">Mathematical Foundation</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_architecture.html">Architecture Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usage Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_extending.html">Extending Panobbgo</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_research.html">Research Context and Future Directions</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core.html">Core Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="strategies.html">Strategies Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="heuristics.html">Heuristics Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyzers.html">Analyzers Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="classic.html">Classic Problems Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="lib.html">Library Module</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#using-uv-recommended">Using UV (Recommended)</a></li>
<li><a class="reference internal" href="#using-pip">Using pip</a></li>
<li><a class="reference internal" href="#dask-cluster-setup">Dask Cluster Setup</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference internal" href="#minimal-example">Minimal Example</a></li>
<li><a class="reference internal" href="#complete-example">Complete Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-custom-problems">Defining Custom Problems</a><ul>
<li><a class="reference internal" href="#basic-problem">Basic Problem</a></li>
<li><a class="reference internal" href="#noisy-problem">Noisy Problem</a></li>
<li><a class="reference internal" href="#constrained-problem">Constrained Problem</a></li>
<li><a class="reference internal" href="#constraint-handling-methods">Constraint Handling Methods</a></li>
<li><a class="reference internal" href="#feasiblesearch-heuristic">FeasibleSearch Heuristic</a></li>
<li><a class="reference internal" href="#constraintgradient-heuristic">ConstraintGradient Heuristic</a></li>
<li><a class="reference internal" href="#localpenaltysearch-heuristic">LocalPenaltySearch Heuristic</a></li>
<li><a class="reference internal" href="#expensive-external-function">Expensive External Function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#choosing-heuristics">Choosing Heuristics</a><ul>
<li><a class="reference internal" href="#heuristic-portfolio">Heuristic Portfolio</a></li>
<li><a class="reference internal" href="#recommended-configurations">Recommended Configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#choosing-a-strategy">Choosing a Strategy</a><ul>
<li><a class="reference internal" href="#strategyroundrobin">StrategyRoundRobin</a></li>
<li><a class="reference internal" href="#strategyrewarding">StrategyRewarding</a></li>
<li><a class="reference internal" href="#strategythompsonsampling">StrategyThompsonSampling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#analyzing-results">Analyzing Results</a><ul>
<li><a class="reference internal" href="#accessing-the-database">Accessing the Database</a></li>
<li><a class="reference internal" href="#plotting-convergence">Plotting Convergence</a></li>
<li><a class="reference internal" href="#heuristic-performance">Heuristic Performance</a></li>
<li><a class="reference internal" href="#pareto-front-constrained-problems">Pareto Front (Constrained Problems)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#budget-management">Budget Management</a></li>
<li><a class="reference internal" href="#parallel-evaluation">Parallel Evaluation</a></li>
<li><a class="reference internal" href="#custom-events">Custom Events</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#persistent-storage-resuming">Persistent Storage &amp; Resuming</a><ul>
<li><a class="reference internal" href="#enabling-storage">Enabling Storage</a></li>
<li><a class="reference internal" href="#resuming-optimization">Resuming Optimization</a></li>
<li><a class="reference internal" href="#accessing-stored-data">Accessing Stored Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#dask-cluster-not-found">Dask Cluster Not Found</a></li>
<li><a class="reference internal" href="#function-evaluation-fails">Function Evaluation Fails</a></li>
<li><a class="reference internal" href="#out-of-memory">Out of Memory</a></li>
<li><a class="reference internal" href="#slow-convergence">Slow Convergence</a></li>
</ul>
</li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Panobbgo</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="guide.html"><span itemprop="name">Panobbgo User Guide</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Usage Guide</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="relative min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
  <article class="yue" role="main">
          <section id="usage-guide">
<h1>Usage Guide<a class="headerlink" href="#usage-guide" title="Link to this heading">¶</a></h1>
<p>This guide covers installation, basic usage, and common workflows for Panobbgo.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Python ≥ 3.8</p></li>
<li><p>NumPy ≥ 2.0</p></li>
<li><p>SciPy ≥ 1.16</p></li>
<li><p>matplotlib ≥ 3.0</p></li>
<li><p>pandas ≥ 2.0</p></li>
<li><p>statsmodels ≥ 0.14</p></li>
<li><p>Dask ≥ 2023.0</p></li>
</ul>
</section>
<section id="using-uv-recommended">
<h3>Using UV (Recommended)<a class="headerlink" href="#using-uv-recommended" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/astral-sh/uv">UV</a> is a fast Python package manager:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Install UV</span>
</span><span data-line="2">curl<span class="w"> </span>-LsSf<span class="w"> </span>https://astral.sh/uv/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
</span><span data-line="3">
</span><span data-line="4"><span class="c1"># Clone and install panobbgo</span>
</span><span data-line="5">git<span class="w"> </span>clone<span class="w"> </span>https://github.com/haraldschilly/panobbgo.git
</span><span data-line="6"><span class="nb">cd</span><span class="w"> </span>panobbgo
</span><span data-line="7">uv<span class="w"> </span>sync<span class="w"> </span>--extra<span class="w"> </span>dev
</span></pre></div>
</div>
</section>
<section id="using-pip">
<h3>Using pip<a class="headerlink" href="#using-pip" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1">git<span class="w"> </span>clone<span class="w"> </span>https://github.com/haraldschilly/panobbgo.git
</span><span data-line="2"><span class="nb">cd</span><span class="w"> </span>panobbgo
</span><span data-line="3">pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[dev]&quot;</span>
</span></pre></div>
</div>
</section>
<section id="dask-cluster-setup">
<h3>Dask Cluster Setup<a class="headerlink" href="#dask-cluster-setup" title="Link to this heading">¶</a></h3>
<p><strong>Automatic Local Cluster (Default):</strong></p>
<p>Panobbgo automatically starts a local Dask cluster with 2 workers for testing and development.
No manual setup required - just run your optimization script!</p>
<p><strong>Custom Cluster Setup:</strong></p>
<p>For production use or custom configurations, you can connect to external clusters:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Install Dask distributed</span>
</span><span data-line="2">pip<span class="w"> </span>install<span class="w"> </span>dask<span class="o">[</span>distributed<span class="o">]</span>
</span><span data-line="3">
</span><span data-line="4"><span class="c1"># Start local cluster with custom workers</span>
</span><span data-line="5">dask<span class="w"> </span>scheduler<span class="w"> </span><span class="p">&amp;</span>
</span><span data-line="6">dask<span class="w"> </span>worker<span class="w"> </span>localhost:8786<span class="w"> </span>--nprocs<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>
</span></pre></div>
</div>
<p>See <a class="reference external" href="https://docs.dask.org/en/stable/deploying.html">Dask distributed documentation</a> for advanced setup
(remote clusters, Kubernetes, SLURM integration, etc.).</p>
</section>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h3>
<p>On first run, Panobbgo creates <code class="docutils literal notranslate"><span class="pre">~/.panobbgo/config.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">[dask]</span>
</span><span data-line="2"><span class="na">cluster_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">local</span><span class="w">                    </span><span class="c1"># &#39;local&#39; (auto-start) or &#39;remote&#39;</span>
</span><span data-line="3"><span class="na">local.n_workers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span><span class="w">                    </span><span class="c1"># Number of local workers (default: 2)</span>
</span><span data-line="4"><span class="na">local.threads_per_worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span><span class="w">           </span><span class="c1"># Threads per worker (default: 1)</span>
</span><span data-line="5"><span class="na">local.memory_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2GB</span><span class="w">               </span><span class="c1"># Memory per worker (default: 2GB)</span>
</span><span data-line="6"><span class="na">local.dashboard_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">:8787</span><span class="w">        </span><span class="c1"># Dashboard port (default: :8787)</span>
</span><span data-line="7"><span class="na">remote.scheduler_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tcp://localhost:8786</span><span class="w">  </span><span class="c1"># For remote clusters</span>
</span><span data-line="8">
</span><span data-line="9"><span class="k">[optimization]</span>
</span><span data-line="10"><span class="na">max_evaluations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000</span><span class="w">    </span><span class="c1"># Evaluation budget</span>
</span><span data-line="11"><span class="na">queue_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20</span><span class="w">       </span><span class="c1"># Heuristic queue size</span>
</span><span data-line="12">
</span><span data-line="13"><span class="k">[strategy]</span>
</span><span data-line="14"><span class="na">smooth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span><span class="w">              </span><span class="c1"># Additive smoothing for bandit</span>
</span><span data-line="15"><span class="na">discount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.95</span><span class="w">           </span><span class="c1"># Performance decay factor</span>
</span><span data-line="16"><span class="na">jobs_per_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5</span><span class="w">       </span><span class="c1"># Batch size per engine</span>
</span><span data-line="17">
</span><span data-line="18"><span class="k">[logging]</span>
</span><span data-line="19"><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span><span class="w">              </span><span class="c1"># DEBUG, INFO, WARNING, ERROR</span>
</span></pre></div>
</div>
<p>Edit this file to customize behavior.</p>
</section>
</section>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<section id="minimal-example">
<h3>Minimal Example<a class="headerlink" href="#minimal-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib.classic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rosenbrock</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Center</span><span class="p">,</span> <span class="n">Random</span><span class="p">,</span> <span class="n">NelderMead</span>
</span><span data-line="4">
</span><span data-line="5"><span class="c1"># Define problem</span>
</span><span data-line="6"><span class="n">problem</span> <span class="o">=</span> <span class="n">Rosenbrock</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span data-line="7">
</span><span data-line="8"><span class="c1"># Create strategy</span>
</span><span data-line="9"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span data-line="10">
</span><span data-line="11"><span class="c1"># Add heuristics</span>
</span><span data-line="12"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>       <span class="c1"># Start at center</span>
</span><span data-line="13"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>       <span class="c1"># Exploration</span>
</span><span data-line="14"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>   <span class="c1"># Exploitation</span>
</span><span data-line="15">
</span><span data-line="16"><span class="c1"># Run optimization (requires: dask scheduler &amp; workers)</span>
</span><span data-line="17"><span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span data-line="18">
</span><span data-line="19"><span class="c1"># Get results</span>
</span><span data-line="20"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best found: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="21"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best x: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="22"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best f(x): </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="complete-example">
<h3>Complete Example<a class="headerlink" href="#complete-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib.classic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rosenbrock</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.analyzers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Best</span><span class="p">,</span> <span class="n">Splitter</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span data-line="5">    <span class="n">Center</span><span class="p">,</span> <span class="n">Zero</span><span class="p">,</span> <span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">Random</span><span class="p">,</span>
</span><span data-line="6">    <span class="n">Nearby</span><span class="p">,</span> <span class="n">NelderMead</span>
</span><span data-line="7"><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9"><span class="c1"># Define 10-dimensional Rosenbrock</span>
</span><span data-line="10"><span class="n">problem</span> <span class="o">=</span> <span class="n">Rosenbrock</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span data-line="11">
</span><span data-line="12"> <span class="c1"># Create adaptive strategy</span>
</span><span data-line="13"> <span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
</span><span data-line="14">     <span class="n">problem</span><span class="p">,</span>
</span><span data-line="15">     <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">2000</span>      <span class="c1"># Budget</span>
</span><span data-line="16"> <span class="p">)</span>
</span><span data-line="17">
</span><span data-line="18"><span class="c1"># Add analyzers (optional - Best is default)</span>
</span><span data-line="19"><span class="n">strategy</span><span class="o">.</span><span class="n">add_analyzer</span><span class="p">(</span><span class="n">Best</span><span class="p">)</span>      <span class="c1"># Track best points</span>
</span><span data-line="20"><span class="n">strategy</span><span class="o">.</span><span class="n">add_analyzer</span><span class="p">(</span><span class="n">Splitter</span><span class="p">)</span>  <span class="c1"># Spatial decomposition</span>
</span><span data-line="21">
</span><span data-line="22"><span class="c1"># Add diverse heuristics</span>
</span><span data-line="23"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>                    <span class="c1"># Initialize at center</span>
</span><span data-line="24"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Zero</span><span class="p">)</span>                      <span class="c1"># Initialize at origin</span>
</span><span data-line="25"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>    <span class="c1"># Space-filling design (5^10 grid)</span>
</span><span data-line="26"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>                    <span class="c1"># Ongoing exploration</span>
</span><span data-line="27"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>                    <span class="c1"># Local perturbations</span>
</span><span data-line="28"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>               <span class="c1"># Simplex optimization</span>
</span><span data-line="29">
</span><span data-line="30"><span class="c1"># Run</span>
</span><span data-line="31"><span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span data-line="32">
</span><span data-line="33"><span class="c1"># Analyze results</span>
</span><span data-line="34"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Optimization complete!&quot;</span><span class="p">)</span>
</span><span data-line="35"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Evaluations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="36"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best f(x): </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="37"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best x: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="38"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found by: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="39">
</span><span data-line="40"><span class="c1"># Access result database</span>
</span><span data-line="41"><span class="n">df</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">results</span>
</span><span data-line="42"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">DataFrame shape: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="43"><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</span></pre></div>
</div>
</section>
</section>
<section id="defining-custom-problems">
<h2>Defining Custom Problems<a class="headerlink" href="#defining-custom-problems" title="Link to this heading">¶</a></h2>
<section id="basic-problem">
<h3>Basic Problem<a class="headerlink" href="#basic-problem" title="Link to this heading">¶</a></h3>
<p>Subclass <a class="reference internal" href="lib.html#panobbgo.lib.Problem" title="panobbgo.lib.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">BoundingBox</span>
</span><span data-line="3">
</span><span data-line="4"><span class="k">class</span><span class="w"> </span><span class="nc">Sphere</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
</span><span data-line="5"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple sphere function: f(x) = sum(x^2)&quot;&quot;&quot;</span>
</span><span data-line="6">
</span><span data-line="7">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
</span><span data-line="8">        <span class="c1"># Define bounding box: each variable in [-10, 10]</span>
</span><span data-line="9">        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">dim</span><span class="p">))</span>
</span><span data-line="10">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">box</span><span class="p">)</span>
</span><span data-line="11">
</span><span data-line="12">    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="13"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Evaluate objective function&quot;&quot;&quot;</span>
</span><span data-line="14">        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span data-line="15">
</span><span data-line="16"><span class="c1"># Use it</span>
</span><span data-line="17"><span class="n">problem</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span data-line="18"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span data-line="19"><span class="c1"># ... add heuristics and run ...</span>
</span></pre></div>
</div>
</section>
<section id="noisy-problem">
<h3>Noisy Problem<a class="headerlink" href="#noisy-problem" title="Link to this heading">¶</a></h3>
<p>Add stochasticity in <code class="docutils literal notranslate"><span class="pre">eval()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">class</span><span class="w"> </span><span class="nc">NoisySphere</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
</span><span data-line="2">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise_std</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
</span><span data-line="3">        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">dim</span><span class="p">))</span>
</span><span data-line="4">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">box</span><span class="p">)</span>
</span><span data-line="5">        <span class="bp">self</span><span class="o">.</span><span class="n">noise_std</span> <span class="o">=</span> <span class="n">noise_std</span>
</span><span data-line="6">
</span><span data-line="7">    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="8"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Noisy evaluation&quot;&quot;&quot;</span>
</span><span data-line="9">        <span class="n">true_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span data-line="10">        <span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise_std</span>
</span><span data-line="11">        <span class="k">return</span> <span class="n">true_value</span> <span class="o">+</span> <span class="n">noise</span>
</span></pre></div>
</div>
</section>
<section id="constrained-problem">
<h3>Constrained Problem<a class="headerlink" href="#constrained-problem" title="Link to this heading">¶</a></h3>
<p>Override <code class="docutils literal notranslate"><span class="pre">eval_constraints()</span></code> to return violation vector:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">class</span><span class="w"> </span><span class="nc">ConstrainedProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
</span><span data-line="2">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="3">        <span class="c1"># 2D problem: x in [-5, 5], y in [-5, 5]</span>
</span><span data-line="4">        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]))</span>
</span><span data-line="5">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="p">)</span>
</span><span data-line="6">
</span><span data-line="7">    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="8"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Objective: minimize (x-1)^2 + (y-2)^2&quot;&quot;&quot;</span>
</span><span data-line="9">        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</span><span data-line="10">
</span><span data-line="11">    <span class="k">def</span><span class="w"> </span><span class="nf">eval_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="12"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Constraints:</span>
</span><span data-line="13"><span class="sd">        g1: x + y &lt;= 1  (i.e., x + y - 1 &lt;= 0)</span>
</span><span data-line="14"><span class="sd">        g2: x &gt;= 0</span>
</span><span data-line="15"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="16">        <span class="n">g1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.0</span>
</span><span data-line="17">        <span class="n">g2</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span data-line="18">        <span class="c1"># Return positive violations</span>
</span><span data-line="19">        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g1</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g2</span><span class="p">)])</span>
</span><span data-line="20">
</span><span data-line="21"><span class="c1"># Panobbgo will minimize objective while trying to satisfy constraints</span>
</span><span data-line="22"><span class="n">problem</span> <span class="o">=</span> <span class="n">ConstrainedProblem</span><span class="p">()</span>
</span><span data-line="23"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</span><span data-line="24">
</span><span data-line="25"><span class="c1"># You can configure the constraint handling method in ~/.panobbgo/config.ini</span>
</span><span data-line="26"><span class="c1"># [optimization]</span>
</span><span data-line="27"><span class="c1"># constraint_handler = AugmentedLagrangianConstraintHandler</span>
</span><span data-line="28">
</span><span data-line="29"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
</span><span data-line="30"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
</span><span data-line="31"><span class="c1"># Add FeasibleSearch to actively target feasible regions</span>
</span><span data-line="32"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">FeasibleSearch</span><span class="p">,</span> <span class="n">ConstraintGradient</span>
</span><span data-line="33"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">FeasibleSearch</span><span class="p">)</span>
</span><span data-line="34"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ConstraintGradient</span><span class="p">)</span>
</span><span data-line="35"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
</span><span data-line="36"><span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span data-line="37">
</span><span data-line="38"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best feasible: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="39"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constraint violation: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">cv</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="constraint-handling-methods">
<h3>Constraint Handling Methods<a class="headerlink" href="#constraint-handling-methods" title="Link to this heading">¶</a></h3>
<p>Panobbgo supports different constraint handling strategies, configurable in <code class="docutils literal notranslate"><span class="pre">config.ini</span></code>:</p>
<ol class="arabic simple">
<li><p><strong>DefaultConstraintHandler</strong> (default):
Lexicographic ordering. Prioritizes feasibility (cv=0) over objective function value.
Good for general use where feasibility is strict.</p></li>
<li><p><strong>PenaltyConstraintHandler</strong>:
Uses a static penalty: $P(x) = f(x) + rho cdot cv(x)^{exponent}$.
Useful if slight violations are acceptable or gradients lead out of feasible region.</p></li>
<li><p><strong>DynamicPenaltyConstraintHandler</strong>:
Penalty coefficient increases over time. Starts low to allow exploration of infeasible regions, then tightens.</p></li>
<li><p><strong>AugmentedLagrangianConstraintHandler</strong>:
Implements the Augmented Lagrangian Method. Adaptively updates multipliers $lambda$ and penalty $mu$ based on progress.
Can be more robust for equality constraints or hard inequality constraints.</p></li>
<li><p><strong>EpsilonConstraintHandler</strong>:
Uses the $epsilon$-Constrained Method. Initially treats points with small violations ($cv(x) le epsilon(t)$) as feasible.
$epsilon(t)$ decreases from <cite>epsilon_start</cite> to 0 over <cite>epsilon_cutoff</cite> evaluations.
Effective for finding feasible regions in difficult problems by approaching the boundary gradually.</p></li>
</ol>
</section>
<section id="feasiblesearch-heuristic">
<h3>FeasibleSearch Heuristic<a class="headerlink" href="#feasiblesearch-heuristic" title="Link to this heading">¶</a></h3>
<p>When dealing with constraints, it is highly recommended to add the <strong>FeasibleSearch</strong> heuristic.
This heuristic is specifically designed to:</p>
<ul class="simple">
<li><p>Repair infeasible solutions by searching towards known feasible regions (Line Search).</p></li>
<li><p>Explore the boundary of the feasible region.</p></li>
<li><p>Adaptively sample around the best point to reduce constraint violations.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">FeasibleSearch</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">FeasibleSearch</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="constraintgradient-heuristic">
<h3>ConstraintGradient Heuristic<a class="headerlink" href="#constraintgradient-heuristic" title="Link to this heading">¶</a></h3>
<p>The <strong>ConstraintGradient</strong> heuristic estimates the gradient of the constraint violation function using finite differences from recent evaluations (or neighbors). It uses this estimated gradient to perform a descent step towards the feasible region. This is particularly useful when constraint violations are smooth.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConstraintGradient</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ConstraintGradient</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="localpenaltysearch-heuristic">
<h3>LocalPenaltySearch Heuristic<a class="headerlink" href="#localpenaltysearch-heuristic" title="Link to this heading">¶</a></h3>
<p>For problems with constraints handled via penalties (e.g. Penalty or Augmented Lagrangian), the <strong>LocalPenaltySearch</strong> heuristic can be very effective. It uses Scipy’s local optimizers (like L-BFGS-B or Nelder-Mead) to minimize the scalarized penalty function directly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">LocalPenaltySearch</span>
</span><span data-line="2">
</span><span data-line="3"><span class="c1"># Use L-BFGS-B on the penalized objective</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LocalPenaltySearch</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;L-BFGS-B&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="expensive-external-function">
<h3>Expensive External Function<a class="headerlink" href="#expensive-external-function" title="Link to this heading">¶</a></h3>
<p>Wrap subprocess or external program:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
</span><span data-line="2"><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span data-line="3">
</span><span data-line="4"><span class="k">class</span><span class="w"> </span><span class="nc">ExternalSimulation</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
</span><span data-line="5">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="6">        <span class="c1"># 3D problem</span>
</span><span data-line="7">        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
</span><span data-line="8">            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
</span><span data-line="9">            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
</span><span data-line="10">            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
</span><span data-line="11">        <span class="p">]))</span>
</span><span data-line="12">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="p">)</span>
</span><span data-line="13">
</span><span data-line="14">    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="15"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Call external simulation&quot;&quot;&quot;</span>
</span><span data-line="16">        <span class="c1"># Write input</span>
</span><span data-line="17">        <span class="n">input_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span>
</span><span data-line="18">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span data-line="19">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span data-line="20">
</span><span data-line="21">        <span class="c1"># Run simulation</span>
</span><span data-line="22">        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span data-line="23">            <span class="p">[</span><span class="s2">&quot;./my_simulation&quot;</span><span class="p">,</span> <span class="s2">&quot;input.json&quot;</span><span class="p">],</span>
</span><span data-line="24">            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="25">            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="26">            <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span>  <span class="c1"># 5 minute timeout</span>
</span><span data-line="27">        <span class="p">)</span>
</span><span data-line="28">
</span><span data-line="29">        <span class="c1"># Parse output</span>
</span><span data-line="30">        <span class="n">output_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span data-line="31">        <span class="k">return</span> <span class="n">output_data</span><span class="p">[</span><span class="s2">&quot;objective_value&quot;</span><span class="p">]</span>
</span></pre></div>
</div>
</section>
</section>
<section id="choosing-heuristics">
<h2>Choosing Heuristics<a class="headerlink" href="#choosing-heuristics" title="Link to this heading">¶</a></h2>
<section id="heuristic-portfolio">
<h3>Heuristic Portfolio<a class="headerlink" href="#heuristic-portfolio" title="Link to this heading">¶</a></h3>
<p>A good portfolio balances exploration and exploitation:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 30.0%" />
<col style="width: 45.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Heuristics</p></th>
<th class="head"><p>When to Use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Initialization</p></td>
<td><p>Center, Zero</p></td>
<td><p>Always include one</p></td>
</tr>
<tr class="row-odd"><td><p>Space-filling</p></td>
<td><p>LatinHypercube</p></td>
<td><p>High-dimensional problems (dim &gt; 5)</p></td>
</tr>
<tr class="row-even"><td><p>Exploration</p></td>
<td><p>Random, Extremal</p></td>
<td><p>Always include Random</p></td>
</tr>
<tr class="row-odd"><td><p>Local search</p></td>
<td><p>Nearby, NelderMead</p></td>
<td><p>Smooth problems</p></td>
</tr>
<tr class="row-even"><td><p>Model-based</p></td>
<td><p>QuadraticWLS</p></td>
<td><p>Low-dimensional (dim &lt; 20)</p></td>
</tr>
<tr class="row-odd"><td><p>Gradient-free</p></td>
<td><p>LBFGSB, LocalPenaltySearch</p></td>
<td><p>When local structure suspected</p></td>
</tr>
<tr class="row-even"><td><p>Constraint Handling</p></td>
<td><p>FeasibleSearch, ConstraintGradient</p></td>
<td><p>When constraints are present</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="recommended-configurations">
<h3>Recommended Configurations<a class="headerlink" href="#recommended-configurations" title="Link to this heading">¶</a></h3>
<p><strong>Low-dimensional (dim ≤ 5):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span data-line="3"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>
</span><span data-line="5"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
</span><span data-line="6"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">QuadraticWLS</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Medium-dimensional (5 &lt; dim ≤ 20):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span data-line="3"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
</span><span data-line="5"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LBFGSB</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>High-dimensional (dim &gt; 20):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
</span><span data-line="3"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LBFGSB</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Very noisy problems:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
</span><span data-line="2"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span data-line="3"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>
</span><span data-line="5"><span class="c1"># Avoid gradient-based methods (LBFGSB)</span>
</span></pre></div>
</div>
</section>
</section>
<section id="choosing-a-strategy">
<h2>Choosing a Strategy<a class="headerlink" href="#choosing-a-strategy" title="Link to this heading">¶</a></h2>
<section id="strategyroundrobin">
<h3>StrategyRoundRobin<a class="headerlink" href="#strategyroundrobin" title="Link to this heading">¶</a></h3>
<p>Use when:</p>
<ul class="simple">
<li><p>You want predictable, deterministic behavior</p></li>
<li><p>Comparing different heuristic portfolios</p></li>
<li><p>Debugging or understanding heuristic behavior</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.round_robin</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRoundRobin</span>
</span><span data-line="2"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRoundRobin</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="strategyrewarding">
<h3>StrategyRewarding<a class="headerlink" href="#strategyrewarding" title="Link to this heading">¶</a></h3>
<p>Use when (recommended for most cases):</p>
<ul class="simple">
<li><p>You want adaptive selection based on performance</p></li>
<li><p>Problem structure is unknown</p></li>
<li><p>You have diverse heuristics</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
</span><span data-line="2"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
</span><span data-line="3">    <span class="n">problem</span><span class="p">,</span>
</span><span data-line="4">    <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
</span><span data-line="5">    <span class="n">smooth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>      <span class="c1"># Exploration parameter</span>
</span><span data-line="6">    <span class="n">discount</span><span class="o">=</span><span class="mf">0.95</span>    <span class="c1"># Performance decay</span>
</span><span data-line="7"><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="strategythompsonsampling">
<h3>StrategyThompsonSampling<a class="headerlink" href="#strategythompsonsampling" title="Link to this heading">¶</a></h3>
<p>Use when:</p>
<ul class="simple">
<li><p>You want a principled probabilistic approach (Beta-Bernoulli bandit)</p></li>
<li><p>You want to balance exploration and exploitation automatically without manual tuning</p></li>
<li><p>Suitable for both stationary and non-stationary (if adapted) environments</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.thompson</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyThompsonSampling</span>
</span><span data-line="2"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyThompsonSampling</span><span class="p">(</span>
</span><span data-line="3">    <span class="n">problem</span><span class="p">,</span>
</span><span data-line="4">    <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">1000</span>
</span><span data-line="5"><span class="p">)</span>
</span></pre></div>
</div>
</section>
</section>
<section id="analyzing-results">
<h2>Analyzing Results<a class="headerlink" href="#analyzing-results" title="Link to this heading">¶</a></h2>
<section id="accessing-the-database">
<h3>Accessing the Database<a class="headerlink" href="#accessing-the-database" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Get results DataFrame</span>
</span><span data-line="2"><span class="n">df</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">results</span>
</span><span data-line="3">
</span><span data-line="4"><span class="c1"># Best point</span>
</span><span data-line="5"><span class="n">best</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">best</span>
</span><span data-line="6"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;f(x) = </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">}</span><span class="s2">, x = </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, by </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="7">
</span><span data-line="8"><span class="c1"># All evaluations by a specific heuristic</span>
</span><span data-line="9"><span class="n">random_results</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[(</span><span class="s1">&#39;who&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">]</span>
</span><span data-line="10">
</span><span data-line="11"><span class="c1"># Feasible points only</span>
</span><span data-line="12"><span class="n">feasible</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[(</span><span class="s1">&#39;cv&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</span><span data-line="13"><span class="n">best_feasible_fx</span> <span class="o">=</span> <span class="n">feasible</span><span class="p">[(</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</span></pre></div>
</div>
</section>
<section id="plotting-convergence">
<h3>Plotting Convergence<a class="headerlink" href="#plotting-convergence" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span data-line="2">
</span><span data-line="3"><span class="c1"># Get objective values in evaluation order</span>
</span><span data-line="4"><span class="n">fx_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">values</span>
</span><span data-line="5">
</span><span data-line="6"><span class="c1"># Compute running minimum</span>
</span><span data-line="7"><span class="n">running_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">fx_values</span><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9"><span class="c1"># Plot</span>
</span><span data-line="10"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span data-line="11"><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">running_min</span><span class="p">)</span>
</span><span data-line="12"><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Evaluation&#39;</span><span class="p">)</span>
</span><span data-line="13"><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Best f(x) found&#39;</span><span class="p">)</span>
</span><span data-line="14"><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Convergence Plot&#39;</span><span class="p">)</span>
</span><span data-line="15"><span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span data-line="16"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>
</div>
</section>
<section id="heuristic-performance">
<h3>Heuristic Performance<a class="headerlink" href="#heuristic-performance" title="Link to this heading">¶</a></h3>
<p>For <a class="reference internal" href="_autosummary/panobbgo.strategies.rewarding.StrategyRewarding.html#panobbgo.strategies.rewarding.StrategyRewarding" title="panobbgo.strategies.rewarding.StrategyRewarding"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrategyRewarding</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Heuristic performance scores</span>
</span><span data-line="2"><span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">strategy</span><span class="o">.</span><span class="n">heuristics</span><span class="p">:</span>
</span><span data-line="3">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: performance = </span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">performance</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span data-line="4">
</span><span data-line="5"><span class="c1"># Count points generated by each heuristic</span>
</span><span data-line="6"><span class="n">df</span><span class="p">[(</span><span class="s1">&#39;who&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</span></pre></div>
</div>
</section>
<section id="pareto-front-constrained-problems">
<h3>Pareto Front (Constrained Problems)<a class="headerlink" href="#pareto-front-constrained-problems" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Access Pareto front from Best analyzer</span>
</span><span data-line="2"><span class="n">best_analyzer</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">analyzer</span><span class="p">(</span><span class="s1">&#39;Best&#39;</span><span class="p">)</span>
</span><span data-line="3"><span class="n">pareto_front</span> <span class="o">=</span> <span class="n">best_analyzer</span><span class="o">.</span><span class="n">pareto_front</span>
</span><span data-line="4">
</span><span data-line="5"><span class="c1"># Plot (f, CV) trade-off</span>
</span><span data-line="6"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span data-line="7"><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
</span><span data-line="8">    <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">fx</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pareto_front</span><span class="p">],</span>
</span><span data-line="9">    <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">cv</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pareto_front</span><span class="p">],</span>
</span><span data-line="10">    <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span>
</span><span data-line="11"><span class="p">)</span>
</span><span data-line="12"><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;f(x)&#39;</span><span class="p">)</span>
</span><span data-line="13"><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Constraint Violation&#39;</span><span class="p">)</span>
</span><span data-line="14"><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pareto Front&#39;</span><span class="p">)</span>
</span><span data-line="15"><span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span data-line="16"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>
</div>
</section>
</section>
<section id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Link to this heading">¶</a></h2>
<section id="budget-management">
<h3>Budget Management<a class="headerlink" href="#budget-management" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Set evaluation budget</span>
</span><span data-line="2"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span data-line="3">
</span><span data-line="4"><span class="c1"># Check progress during optimization</span>
</span><span data-line="5"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Budget used: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_evaluations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="parallel-evaluation">
<h3>Parallel Evaluation<a class="headerlink" href="#parallel-evaluation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Control batch size</span>
</span><span data-line="2"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
</span><span data-line="3">    <span class="n">problem</span><span class="p">,</span>
</span><span data-line="4">    <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>               <span class="c1"># Jobs per client</span>
</span><span data-line="5">    <span class="n">jobs_per_client</span><span class="o">=</span><span class="mi">5</span>      <span class="c1"># Batch size</span>
</span><span data-line="6"><span class="p">)</span>
</span><span data-line="7">
</span><span data-line="8"><span class="c1"># With 4 Dask workers, evaluates up to 4*5 = 20 points simultaneously</span>
</span></pre></div>
</div>
</section>
<section id="custom-events">
<h3>Custom Events<a class="headerlink" href="#custom-events" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Publish custom event from a heuristic</span>
</span><span data-line="2"><span class="k">class</span><span class="w"> </span><span class="nc">MyHeuristic</span><span class="p">(</span><span class="n">Heuristic</span><span class="p">):</span>
</span><span data-line="3">    <span class="k">def</span><span class="w"> </span><span class="nf">on_new_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">):</span>
</span><span data-line="4">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span data-line="5">            <span class="bp">self</span><span class="o">.</span><span class="n">eventbus</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s2">&quot;my_custom_event&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>
</span><span data-line="6">
</span><span data-line="7"><span class="c1"># Subscribe in another module</span>
</span><span data-line="8"><span class="k">class</span><span class="w"> </span><span class="nc">MyAnalyzer</span><span class="p">(</span><span class="n">Analyzer</span><span class="p">):</span>
</span><span data-line="9">    <span class="k">def</span><span class="w"> </span><span class="nf">on_my_custom_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span data-line="10">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received custom event with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> results&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Configure in ~/.panobbgo/config.ini</span>
</span><span data-line="2"><span class="p">[</span><span class="n">logging</span><span class="p">]</span>
</span><span data-line="3"><span class="n">level</span> <span class="o">=</span> <span class="n">DEBUG</span>
</span><span data-line="4"><span class="n">focus</span> <span class="o">=</span> <span class="n">heuristics</span>  <span class="c1"># Only log from heuristics module</span>
</span><span data-line="5">
</span><span data-line="6"><span class="c1"># Or programmatically</span>
</span><span data-line="7"><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span data-line="8"><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;panobbgo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
</section>
<section id="persistent-storage-resuming">
<h2>Persistent Storage &amp; Resuming<a class="headerlink" href="#persistent-storage-resuming" title="Link to this heading">¶</a></h2>
<p>Panobbgo supports saving optimization results to an SQLite database. This allows you to:</p>
<ol class="arabic simple">
<li><p><strong>Pause and resume</strong> long-running optimizations.</p></li>
<li><p><strong>Recover</strong> from crashes without losing data.</p></li>
<li><p><strong>Analyze results</strong> post-hoc using standard SQL tools or other libraries.</p></li>
</ol>
<section id="enabling-storage">
<h3>Enabling Storage<a class="headerlink" href="#enabling-storage" title="Link to this heading">¶</a></h3>
<p>Add the storage configuration to your <cite>~/.panobbgo/config.ini</cite> or pass it via <cite>config.yaml</cite>:</p>
<p><strong>config.ini</strong>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">[storage]</span>
</span><span data-line="2"><span class="na">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">sqlite</span>
</span><span data-line="3"><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_results.db</span>
</span></pre></div>
</div>
<p><strong>config.yaml</strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="nt">storage</span><span class="p">:</span>
</span><span data-line="2"><span class="w">  </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sqlite</span>
</span><span data-line="3"><span class="w">  </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_results.db</span>
</span></pre></div>
</div>
</section>
<section id="resuming-optimization">
<h3>Resuming Optimization<a class="headerlink" href="#resuming-optimization" title="Link to this heading">¶</a></h3>
<p>When you start a strategy with storage enabled, Panobbgo automatically checks the database file.
If it finds existing results, it loads them into memory and resumes the optimization process,
continuing from where it left off.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="c1"># Run 1: Start optimization</span>
</span><span data-line="2"><span class="c1"># (Assume config enables sqlite storage)</span>
</span><span data-line="3"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span data-line="4"><span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span data-line="5"><span class="c1"># Strategy runs for 100 evals and saves them to &#39;my_results.db&#39;</span>
</span><span data-line="6">
</span><span data-line="7"><span class="c1"># Run 2: Resume and extend</span>
</span><span data-line="8"><span class="c1"># Panobbgo loads the 100 previous results</span>
</span><span data-line="9"><span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span data-line="10"><span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span data-line="11"><span class="c1"># Strategy runs for another 100 evals (total 200)</span>
</span></pre></div>
</div>
</section>
<section id="accessing-stored-data">
<h3>Accessing Stored Data<a class="headerlink" href="#accessing-stored-data" title="Link to this heading">¶</a></h3>
<p>The SQLite database contains a <code class="docutils literal notranslate"><span class="pre">results</span></code> table with the following schema:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: Integer Primary Key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>: JSON array of coordinates</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fx</span></code>: Objective function value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv_vec</span></code>: JSON array of constraint violations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">who</span></code>: Name of the heuristic that generated the point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code>: Error estimate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>: Unix timestamp of generation</p></li>
</ul>
<p>You can query this using the <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> command-line tool or any SQLite client:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1">sqlite3<span class="w"> </span>my_results.db<span class="w"> </span><span class="s2">&quot;SELECT id, fx, who FROM results ORDER BY fx ASC LIMIT 5;&quot;</span>
</span></pre></div>
</div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<section id="dask-cluster-not-found">
<h3>Dask Cluster Not Found<a class="headerlink" href="#dask-cluster-not-found" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> <code class="docutils literal notranslate"><span class="pre">TimeoutError:</span> <span class="pre">Cluster</span> <span class="pre">not</span> <span class="pre">found</span></code></p>
<p><strong>Solution:</strong> Start Dask cluster before running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1">dask<span class="w"> </span>scheduler<span class="w"> </span><span class="p">&amp;</span>
</span><span data-line="2">dask<span class="w"> </span>worker<span class="w"> </span>localhost:8786<span class="w"> </span>--nprocs<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>
</span></pre></div>
</div>
</section>
<section id="function-evaluation-fails">
<h3>Function Evaluation Fails<a class="headerlink" href="#function-evaluation-fails" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> Exception during evaluation</p>
<p><strong>Solution:</strong> Ensure your <code class="docutils literal notranslate"><span class="pre">eval()</span></code> method handles all inputs in the bounding box:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="2">    <span class="k">try</span><span class="p">:</span>
</span><span data-line="3">        <span class="k">return</span> <span class="n">my_calculation</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span data-line="4">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span data-line="5">        <span class="c1"># Return large penalty value</span>
</span><span data-line="6">        <span class="k">return</span> <span class="mf">1e10</span>
</span></pre></div>
</div>
</section>
<section id="out-of-memory">
<h3>Out of Memory<a class="headerlink" href="#out-of-memory" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> MemoryError with large result database</p>
<p><strong>Solution:</strong> Reduce <code class="docutils literal notranslate"><span class="pre">max_evaluations</span></code> or implement result pruning.</p>
</section>
<section id="slow-convergence">
<h3>Slow Convergence<a class="headerlink" href="#slow-convergence" title="Link to this heading">¶</a></h3>
<p><strong>Issue:</strong> Not finding good solutions</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic simple">
<li><p>Increase budget: <code class="docutils literal notranslate"><span class="pre">max_evaluations=5000</span></code></p></li>
<li><p>Add more diverse heuristics</p></li>
<li><p>Adjust bounding box (too large?)</p></li>
<li><p>Check if problem is feasible</p></li>
</ol>
</section>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Learn about the mathematical foundation: <a class="reference internal" href="guide_mathematical_foundation.html"><span class="doc">Mathematical Foundation</span></a></p></li>
<li><p>Understand the architecture: <a class="reference internal" href="guide_architecture.html"><span class="doc">Architecture Overview</span></a></p></li>
<li><p>Extend with custom components: <a class="reference internal" href="guide_extending.html"><span class="doc">Extending Panobbgo</span></a></p></li>
<li><p>Explore research context: <a class="reference internal" href="guide_research.html"><span class="doc">Research Context and Future Directions</span></a></p></li>
</ul>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="guide_architecture.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Architecture Overview</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="guide_extending.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Extending Panobbgo</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2012-2026, Harald Schilly. License Apache 2.0</p>
  
  <p>
    Made with
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://github.com/haraldschilly/panobbgo" aria-label="GitHub">
  <iconify-icon icon="simple-icons:github"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="_static/documentation_options.js?v=1859ee8a"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="_static/shibuya.js?v=cac61aee"></script></body>
</html>