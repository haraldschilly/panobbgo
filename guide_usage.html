<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Usage Guide &#8212; Panobbgo 0.0.1pre documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=40bee8ff" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    
    <script src="_static/documentation_options.js?v=1859ee8a"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Panobbgo 0.0.1pre documentation"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extending Panobbgo" href="guide_extending.html" />
    <link rel="prev" title="Architecture Overview" href="guide_architecture.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="guide_extending.html" title="Extending Panobbgo"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="guide_architecture.html" title="Architecture Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Panobbgo</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="guide.html" accesskey="U">Panobbgo User Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Usage Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="usage-guide">
<h1>Usage Guide<a class="headerlink" href="#usage-guide" title="Link to this heading">¶</a></h1>
<p>This guide covers installation, basic usage, and common workflows for Panobbgo.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Python ≥ 3.8</p></li>
<li><p>NumPy ≥ 2.0</p></li>
<li><p>SciPy ≥ 1.16</p></li>
<li><p>matplotlib ≥ 3.0</p></li>
<li><p>pandas ≥ 2.0</p></li>
<li><p>statsmodels ≥ 0.14</p></li>
<li><p>Dask ≥ 2023.0</p></li>
</ul>
</section>
<section id="using-uv-recommended">
<h3>Using UV (Recommended)<a class="headerlink" href="#using-uv-recommended" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/astral-sh/uv">UV</a> is a fast Python package manager:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install UV</span>
curl<span class="w"> </span>-LsSf<span class="w"> </span>https://astral.sh/uv/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Clone and install panobbgo</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/haraldschilly/panobbgo.git
<span class="nb">cd</span><span class="w"> </span>panobbgo
uv<span class="w"> </span>sync<span class="w"> </span>--extra<span class="w"> </span>dev
</pre></div>
</div>
</section>
<section id="using-pip">
<h3>Using pip<a class="headerlink" href="#using-pip" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/haraldschilly/panobbgo.git
<span class="nb">cd</span><span class="w"> </span>panobbgo
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[dev]&quot;</span>
</pre></div>
</div>
</section>
<section id="dask-cluster-setup">
<h3>Dask Cluster Setup<a class="headerlink" href="#dask-cluster-setup" title="Link to this heading">¶</a></h3>
<p><strong>Automatic Local Cluster (Default):</strong></p>
<p>Panobbgo automatically starts a local Dask cluster with 2 workers for testing and development.
No manual setup required - just run your optimization script!</p>
<p><strong>Custom Cluster Setup:</strong></p>
<p>For production use or custom configurations, you can connect to external clusters:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Dask distributed</span>
pip<span class="w"> </span>install<span class="w"> </span>dask<span class="o">[</span>distributed<span class="o">]</span>

<span class="c1"># Start local cluster with custom workers</span>
dask<span class="w"> </span>scheduler<span class="w"> </span><span class="p">&amp;</span>
dask<span class="w"> </span>worker<span class="w"> </span>localhost:8786<span class="w"> </span>--nprocs<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://docs.dask.org/en/stable/deploying.html">Dask distributed documentation</a> for advanced setup
(remote clusters, Kubernetes, SLURM integration, etc.).</p>
</section>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h3>
<p>On first run, Panobbgo creates <code class="docutils literal notranslate"><span class="pre">~/.panobbgo/config.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[dask]</span>
<span class="na">cluster_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">local</span><span class="w">                    </span><span class="c1"># &#39;local&#39; (auto-start) or &#39;remote&#39;</span>
<span class="na">local.n_workers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span><span class="w">                    </span><span class="c1"># Number of local workers (default: 2)</span>
<span class="na">local.threads_per_worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span><span class="w">           </span><span class="c1"># Threads per worker (default: 1)</span>
<span class="na">local.memory_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2GB</span><span class="w">               </span><span class="c1"># Memory per worker (default: 2GB)</span>
<span class="na">local.dashboard_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">:8787</span><span class="w">        </span><span class="c1"># Dashboard port (default: :8787)</span>
<span class="na">remote.scheduler_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tcp://localhost:8786</span><span class="w">  </span><span class="c1"># For remote clusters</span>

<span class="k">[optimization]</span>
<span class="na">max_evaluations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000</span><span class="w">    </span><span class="c1"># Evaluation budget</span>
<span class="na">queue_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20</span><span class="w">       </span><span class="c1"># Heuristic queue size</span>

<span class="k">[strategy]</span>
<span class="na">smooth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span><span class="w">              </span><span class="c1"># Additive smoothing for bandit</span>
<span class="na">discount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.95</span><span class="w">           </span><span class="c1"># Performance decay factor</span>
<span class="na">jobs_per_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5</span><span class="w">       </span><span class="c1"># Batch size per engine</span>

<span class="k">[logging]</span>
<span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span><span class="w">              </span><span class="c1"># DEBUG, INFO, WARNING, ERROR</span>
</pre></div>
</div>
<p>Edit this file to customize behavior.</p>
</section>
</section>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<section id="minimal-example">
<h3>Minimal Example<a class="headerlink" href="#minimal-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib.classic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rosenbrock</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Center</span><span class="p">,</span> <span class="n">Random</span><span class="p">,</span> <span class="n">NelderMead</span>

<span class="c1"># Define problem</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">Rosenbrock</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Create strategy</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1"># Add heuristics</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>       <span class="c1"># Start at center</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>       <span class="c1"># Exploration</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>   <span class="c1"># Exploitation</span>

<span class="c1"># Run optimization (requires: dask scheduler &amp; workers)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Get results</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best found: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best x: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best f(x): </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="complete-example">
<h3>Complete Example<a class="headerlink" href="#complete-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib.classic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rosenbrock</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.analyzers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Best</span><span class="p">,</span> <span class="n">Splitter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.heuristics</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Center</span><span class="p">,</span> <span class="n">Zero</span><span class="p">,</span> <span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">Random</span><span class="p">,</span>
    <span class="n">Nearby</span><span class="p">,</span> <span class="n">NelderMead</span>
<span class="p">)</span>

<span class="c1"># Define 10-dimensional Rosenbrock</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">Rosenbrock</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

 <span class="c1"># Create adaptive strategy</span>
 <span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
     <span class="n">problem</span><span class="p">,</span>
     <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">2000</span>      <span class="c1"># Budget</span>
 <span class="p">)</span>

<span class="c1"># Add analyzers (optional - Best is default)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add_analyzer</span><span class="p">(</span><span class="n">Best</span><span class="p">)</span>      <span class="c1"># Track best points</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add_analyzer</span><span class="p">(</span><span class="n">Splitter</span><span class="p">)</span>  <span class="c1"># Spatial decomposition</span>

<span class="c1"># Add diverse heuristics</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>                    <span class="c1"># Initialize at center</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Zero</span><span class="p">)</span>                      <span class="c1"># Initialize at origin</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>    <span class="c1"># Space-filling design (5^10 grid)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>                    <span class="c1"># Ongoing exploration</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>                    <span class="c1"># Local perturbations</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>               <span class="c1"># Simplex optimization</span>

<span class="c1"># Run</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Analyze results</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Optimization complete!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Evaluations: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best f(x): </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best x: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found by: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Access result database</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">results</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">DataFrame shape: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="defining-custom-problems">
<h2>Defining Custom Problems<a class="headerlink" href="#defining-custom-problems" title="Link to this heading">¶</a></h2>
<section id="basic-problem">
<h3>Basic Problem<a class="headerlink" href="#basic-problem" title="Link to this heading">¶</a></h3>
<p>Subclass <a class="reference internal" href="lib.html#panobbgo.lib.lib.Problem" title="panobbgo.lib.lib.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.lib.lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">BoundingBox</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Sphere</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple sphere function: f(x) = sum(x^2)&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="c1"># Define bounding box: each variable in [-10, 10]</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">dim</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">box</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Evaluate objective function&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Use it</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="c1"># ... add heuristics and run ...</span>
</pre></div>
</div>
</section>
<section id="noisy-problem">
<h3>Noisy Problem<a class="headerlink" href="#noisy-problem" title="Link to this heading">¶</a></h3>
<p>Add stochasticity in <code class="docutils literal notranslate"><span class="pre">eval()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">NoisySphere</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">noise_std</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">dim</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">box</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noise_std</span> <span class="o">=</span> <span class="n">noise_std</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Noisy evaluation&quot;&quot;&quot;</span>
        <span class="n">true_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise_std</span>
        <span class="k">return</span> <span class="n">true_value</span> <span class="o">+</span> <span class="n">noise</span>
</pre></div>
</div>
</section>
<section id="constrained-problem">
<h3>Constrained Problem<a class="headerlink" href="#constrained-problem" title="Link to this heading">¶</a></h3>
<p>Override <code class="docutils literal notranslate"><span class="pre">eval_constraints()</span></code> to return violation vector:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ConstrainedProblem</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 2D problem: x in [-5, 5], y in [-5, 5]</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Objective: minimize (x-1)^2 + (y-2)^2&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constraints:</span>
<span class="sd">        g1: x + y &lt;= 1  (i.e., x + y - 1 &lt;= 0)</span>
<span class="sd">        g2: x &gt;= 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">g1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.0</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Return positive violations</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g1</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g2</span><span class="p">)])</span>

<span class="c1"># Panobbgo will minimize objective while trying to satisfy constraints</span>
<span class="n">problem</span> <span class="o">=</span> <span class="n">ConstrainedProblem</span><span class="p">()</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="c1"># You can configure the constraint handling method in ~/.panobbgo/config.ini</span>
<span class="c1"># [optimization]</span>
<span class="c1"># constraint_handler = AugmentedLagrangianConstraintHandler</span>

<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best feasible: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constraint violation: </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">cv</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="constraint-handling-methods">
<h3>Constraint Handling Methods<a class="headerlink" href="#constraint-handling-methods" title="Link to this heading">¶</a></h3>
<p>Panobbgo supports different constraint handling strategies, configurable in <code class="docutils literal notranslate"><span class="pre">config.ini</span></code>:</p>
<ol class="arabic simple">
<li><p><strong>DefaultConstraintHandler</strong> (default):
Lexicographic ordering. Prioritizes feasibility (cv=0) over objective function value.
Good for general use where feasibility is strict.</p></li>
<li><p><strong>PenaltyConstraintHandler</strong>:
Uses a static penalty: $P(x) = f(x) + rho cdot cv(x)^{exponent}$.
Useful if slight violations are acceptable or gradients lead out of feasible region.</p></li>
<li><p><strong>DynamicPenaltyConstraintHandler</strong>:
Penalty coefficient increases over time. Starts low to allow exploration of infeasible regions, then tightens.</p></li>
<li><p><strong>AugmentedLagrangianConstraintHandler</strong>:
Implements the Augmented Lagrangian Method. Adaptively updates multipliers $lambda$ and penalty $mu$ based on progress.
Can be more robust for equality constraints or hard inequality constraints.</p></li>
</ol>
</section>
<section id="expensive-external-function">
<h3>Expensive External Function<a class="headerlink" href="#expensive-external-function" title="Link to this heading">¶</a></h3>
<p>Wrap subprocess or external program:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExternalSimulation</span><span class="p">(</span><span class="n">Problem</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 3D problem</span>
        <span class="n">box</span> <span class="o">=</span> <span class="n">BoundingBox</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
        <span class="p">]))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Call external simulation&quot;&quot;&quot;</span>
        <span class="c1"># Write input</span>
        <span class="n">input_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="c1"># Run simulation</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;./my_simulation&quot;</span><span class="p">,</span> <span class="s2">&quot;input.json&quot;</span><span class="p">],</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="mi">300</span>  <span class="c1"># 5 minute timeout</span>
        <span class="p">)</span>

        <span class="c1"># Parse output</span>
        <span class="n">output_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output_data</span><span class="p">[</span><span class="s2">&quot;objective_value&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="choosing-heuristics">
<h2>Choosing Heuristics<a class="headerlink" href="#choosing-heuristics" title="Link to this heading">¶</a></h2>
<section id="heuristic-portfolio">
<h3>Heuristic Portfolio<a class="headerlink" href="#heuristic-portfolio" title="Link to this heading">¶</a></h3>
<p>A good portfolio balances exploration and exploitation:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 30.0%" />
<col style="width: 45.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Heuristics</p></th>
<th class="head"><p>When to Use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Initialization</p></td>
<td><p>Center, Zero</p></td>
<td><p>Always include one</p></td>
</tr>
<tr class="row-odd"><td><p>Space-filling</p></td>
<td><p>LatinHypercube</p></td>
<td><p>High-dimensional problems (dim &gt; 5)</p></td>
</tr>
<tr class="row-even"><td><p>Exploration</p></td>
<td><p>Random, Extremal</p></td>
<td><p>Always include Random</p></td>
</tr>
<tr class="row-odd"><td><p>Local search</p></td>
<td><p>Nearby, NelderMead</p></td>
<td><p>Smooth problems</p></td>
</tr>
<tr class="row-even"><td><p>Model-based</p></td>
<td><p>QuadraticWLS</p></td>
<td><p>Low-dimensional (dim &lt; 20)</p></td>
</tr>
<tr class="row-odd"><td><p>Gradient-free</p></td>
<td><p>LBFGSB</p></td>
<td><p>When local structure suspected</p></td>
</tr>
</tbody>
</table>
</section>
<section id="recommended-configurations">
<h3>Recommended Configurations<a class="headerlink" href="#recommended-configurations" title="Link to this heading">¶</a></h3>
<p><strong>Low-dimensional (dim ≤ 5):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">QuadraticWLS</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Medium-dimensional (5 &lt; dim ≤ 20):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LBFGSB</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>High-dimensional (dim &gt; 20):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">NelderMead</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LBFGSB</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Very noisy problems:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Center</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LatinHypercube</span><span class="p">,</span> <span class="n">div</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Random</span><span class="p">)</span>
<span class="n">strategy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Nearby</span><span class="p">)</span>
<span class="c1"># Avoid gradient-based methods (LBFGSB)</span>
</pre></div>
</div>
</section>
</section>
<section id="choosing-a-strategy">
<h2>Choosing a Strategy<a class="headerlink" href="#choosing-a-strategy" title="Link to this heading">¶</a></h2>
<section id="strategyroundrobin">
<h3>StrategyRoundRobin<a class="headerlink" href="#strategyroundrobin" title="Link to this heading">¶</a></h3>
<p>Use when:</p>
<ul class="simple">
<li><p>You want predictable, deterministic behavior</p></li>
<li><p>Comparing different heuristic portfolios</p></li>
<li><p>Debugging or understanding heuristic behavior</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.round_robin</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRoundRobin</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRoundRobin</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="strategyrewarding">
<h3>StrategyRewarding<a class="headerlink" href="#strategyrewarding" title="Link to this heading">¶</a></h3>
<p>Use when (recommended for most cases):</p>
<ul class="simple">
<li><p>You want adaptive selection based on performance</p></li>
<li><p>Problem structure is unknown</p></li>
<li><p>You have diverse heuristics</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">panobbgo.strategies.rewarding</span><span class="w"> </span><span class="kn">import</span> <span class="n">StrategyRewarding</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
    <span class="n">problem</span><span class="p">,</span>
    <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">smooth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>      <span class="c1"># Exploration parameter</span>
    <span class="n">discount</span><span class="o">=</span><span class="mf">0.95</span>    <span class="c1"># Performance decay</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="analyzing-results">
<h2>Analyzing Results<a class="headerlink" href="#analyzing-results" title="Link to this heading">¶</a></h2>
<section id="accessing-the-database">
<h3>Accessing the Database<a class="headerlink" href="#accessing-the-database" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get results DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">results</span>

<span class="c1"># Best point</span>
<span class="n">best</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">best</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;f(x) = </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">fx</span><span class="si">}</span><span class="s2">, x = </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, by </span><span class="si">{</span><span class="n">best</span><span class="o">.</span><span class="n">who</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># All evaluations by a specific heuristic</span>
<span class="n">random_results</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[(</span><span class="s1">&#39;who&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">==</span> <span class="s1">&#39;Random&#39;</span><span class="p">]</span>

<span class="c1"># Feasible points only</span>
<span class="n">feasible</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[(</span><span class="s1">&#39;cv&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">best_feasible_fx</span> <span class="o">=</span> <span class="n">feasible</span><span class="p">[(</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="plotting-convergence">
<h3>Plotting Convergence<a class="headerlink" href="#plotting-convergence" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Get objective values in evaluation order</span>
<span class="n">fx_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Compute running minimum</span>
<span class="n">running_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">fx_values</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">running_min</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Evaluation&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Best f(x) found&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Convergence Plot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="heuristic-performance">
<h3>Heuristic Performance<a class="headerlink" href="#heuristic-performance" title="Link to this heading">¶</a></h3>
<p>For <code class="xref py py-class docutils literal notranslate"><span class="pre">StrategyRewarding</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Heuristic performance scores</span>
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">strategy</span><span class="o">.</span><span class="n">heuristics</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: performance = </span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">performance</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Count points generated by each heuristic</span>
<span class="n">df</span><span class="p">[(</span><span class="s1">&#39;who&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="pareto-front-constrained-problems">
<h3>Pareto Front (Constrained Problems)<a class="headerlink" href="#pareto-front-constrained-problems" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access Pareto front from Best analyzer</span>
<span class="n">best_analyzer</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">analyzer</span><span class="p">(</span><span class="s1">&#39;Best&#39;</span><span class="p">)</span>
<span class="n">pareto_front</span> <span class="o">=</span> <span class="n">best_analyzer</span><span class="o">.</span><span class="n">pareto_front</span>

<span class="c1"># Plot (f, CV) trade-off</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">fx</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pareto_front</span><span class="p">],</span>
    <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">cv</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pareto_front</span><span class="p">],</span>
    <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;f(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Constraint Violation&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pareto Front&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Link to this heading">¶</a></h2>
<section id="budget-management">
<h3>Budget Management<a class="headerlink" href="#budget-management" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set evaluation budget</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">max_evaluations</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1"># Check progress during optimization</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Budget used: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">strategy</span><span class="o">.</span><span class="n">results</span><span class="p">)</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">strategy</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_evaluations</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="parallel-evaluation">
<h3>Parallel Evaluation<a class="headerlink" href="#parallel-evaluation" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Control batch size</span>
<span class="n">strategy</span> <span class="o">=</span> <span class="n">StrategyRewarding</span><span class="p">(</span>
    <span class="n">problem</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>               <span class="c1"># Jobs per client</span>
    <span class="n">jobs_per_client</span><span class="o">=</span><span class="mi">5</span>      <span class="c1"># Batch size</span>
<span class="p">)</span>

<span class="c1"># With 4 Dask workers, evaluates up to 4*5 = 20 points simultaneously</span>
</pre></div>
</div>
</section>
<section id="custom-events">
<h3>Custom Events<a class="headerlink" href="#custom-events" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Publish custom event from a heuristic</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyHeuristic</span><span class="p">(</span><span class="n">Heuristic</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_new_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eventbus</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s2">&quot;my_custom_event&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>

<span class="c1"># Subscribe in another module</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyAnalyzer</span><span class="p">(</span><span class="n">Analyzer</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_my_custom_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received custom event with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> results&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configure in ~/.panobbgo/config.ini</span>
<span class="p">[</span><span class="n">logging</span><span class="p">]</span>
<span class="n">level</span> <span class="o">=</span> <span class="n">DEBUG</span>
<span class="n">focus</span> <span class="o">=</span> <span class="n">heuristics</span>  <span class="c1"># Only log from heuristics module</span>

<span class="c1"># Or programmatically</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;panobbgo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<section id="dask-cluster-not-found">
<h3>Dask Cluster Not Found<a class="headerlink" href="#dask-cluster-not-found" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> <code class="docutils literal notranslate"><span class="pre">TimeoutError:</span> <span class="pre">Cluster</span> <span class="pre">not</span> <span class="pre">found</span></code></p>
<p><strong>Solution:</strong> Start Dask cluster before running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dask<span class="w"> </span>scheduler<span class="w"> </span><span class="p">&amp;</span>
dask<span class="w"> </span>worker<span class="w"> </span>localhost:8786<span class="w"> </span>--nprocs<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
</section>
<section id="function-evaluation-fails">
<h3>Function Evaluation Fails<a class="headerlink" href="#function-evaluation-fails" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> Exception during evaluation</p>
<p><strong>Solution:</strong> Ensure your <code class="docutils literal notranslate"><span class="pre">eval()</span></code> method handles all inputs in the bounding box:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">my_calculation</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Return large penalty value</span>
        <span class="k">return</span> <span class="mf">1e10</span>
</pre></div>
</div>
</section>
<section id="out-of-memory">
<h3>Out of Memory<a class="headerlink" href="#out-of-memory" title="Link to this heading">¶</a></h3>
<p><strong>Error:</strong> MemoryError with large result database</p>
<p><strong>Solution:</strong> Reduce <code class="docutils literal notranslate"><span class="pre">max_evaluations</span></code> or implement result pruning.</p>
</section>
<section id="slow-convergence">
<h3>Slow Convergence<a class="headerlink" href="#slow-convergence" title="Link to this heading">¶</a></h3>
<p><strong>Issue:</strong> Not finding good solutions</p>
<p><strong>Solutions:</strong></p>
<ol class="arabic simple">
<li><p>Increase budget: <code class="docutils literal notranslate"><span class="pre">max_evaluations=5000</span></code></p></li>
<li><p>Add more diverse heuristics</p></li>
<li><p>Adjust bounding box (too large?)</p></li>
<li><p>Check if problem is feasible</p></li>
</ol>
</section>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Learn about the mathematical foundation: <a class="reference internal" href="guide_mathematical_foundation.html"><span class="doc">Mathematical Foundation</span></a></p></li>
<li><p>Understand the architecture: <a class="reference internal" href="guide_architecture.html"><span class="doc">Architecture Overview</span></a></p></li>
<li><p>Extend with custom components: <a class="reference internal" href="guide_extending.html"><span class="doc">Extending Panobbgo</span></a></p></li>
<li><p>Explore research context: <a class="reference internal" href="guide_research.html"><span class="doc">Research Context and Future Directions</span></a></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Usage Guide</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#using-uv-recommended">Using UV (Recommended)</a></li>
<li><a class="reference internal" href="#using-pip">Using pip</a></li>
<li><a class="reference internal" href="#dask-cluster-setup">Dask Cluster Setup</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference internal" href="#minimal-example">Minimal Example</a></li>
<li><a class="reference internal" href="#complete-example">Complete Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-custom-problems">Defining Custom Problems</a><ul>
<li><a class="reference internal" href="#basic-problem">Basic Problem</a></li>
<li><a class="reference internal" href="#noisy-problem">Noisy Problem</a></li>
<li><a class="reference internal" href="#constrained-problem">Constrained Problem</a></li>
<li><a class="reference internal" href="#constraint-handling-methods">Constraint Handling Methods</a></li>
<li><a class="reference internal" href="#expensive-external-function">Expensive External Function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#choosing-heuristics">Choosing Heuristics</a><ul>
<li><a class="reference internal" href="#heuristic-portfolio">Heuristic Portfolio</a></li>
<li><a class="reference internal" href="#recommended-configurations">Recommended Configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#choosing-a-strategy">Choosing a Strategy</a><ul>
<li><a class="reference internal" href="#strategyroundrobin">StrategyRoundRobin</a></li>
<li><a class="reference internal" href="#strategyrewarding">StrategyRewarding</a></li>
</ul>
</li>
<li><a class="reference internal" href="#analyzing-results">Analyzing Results</a><ul>
<li><a class="reference internal" href="#accessing-the-database">Accessing the Database</a></li>
<li><a class="reference internal" href="#plotting-convergence">Plotting Convergence</a></li>
<li><a class="reference internal" href="#heuristic-performance">Heuristic Performance</a></li>
<li><a class="reference internal" href="#pareto-front-constrained-problems">Pareto Front (Constrained Problems)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#budget-management">Budget Management</a></li>
<li><a class="reference internal" href="#parallel-evaluation">Parallel Evaluation</a></li>
<li><a class="reference internal" href="#custom-events">Custom Events</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#dask-cluster-not-found">Dask Cluster Not Found</a></li>
<li><a class="reference internal" href="#function-evaluation-fails">Function Evaluation Fails</a></li>
<li><a class="reference internal" href="#out-of-memory">Out of Memory</a></li>
<li><a class="reference internal" href="#slow-convergence">Slow Convergence</a></li>
</ul>
</li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="guide_architecture.html"
                          title="previous chapter">Architecture Overview</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="guide_extending.html"
                          title="next chapter">Extending Panobbgo</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/guide_usage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="guide_extending.html" title="Extending Panobbgo"
             >next</a> |</li>
        <li class="right" >
          <a href="guide_architecture.html" title="Architecture Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Panobbgo</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="guide.html" >Panobbgo User Guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Usage Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2012, Harald Schilly. License Apache 2.0.
    </div>
  </body>
</html>